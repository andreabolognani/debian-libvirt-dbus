From: =?utf-8?q?J=C3=A1n_Tomko?= <jtomko@redhat.com>
Date: Thu, 24 Sep 2020 15:10:27 +0200
Subject: tests: vcpupininfo: use pytest.skip()
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

Mark the test as skipped instead of quietly passing.

Signed-off-by: JÃ¡n Tomko <jtomko@redhat.com>
(cherry picked from commit e19bc98ff7f653dca7c38e0aeec5754a74141e16)
---
 tests/test_domain.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/tests/test_domain.py b/tests/test_domain.py
index 7f67a3a..605fb43 100755
--- a/tests/test_domain.py
+++ b/tests/test_domain.py
@@ -2,6 +2,7 @@
 
 import dbus
 import libvirttest
+import pytest
 import xmldata
 
 DBUS_EXCEPTION_MISSING_FUNCTION = 'this function is not supported by the connection driver'
@@ -158,7 +159,7 @@ class TestDomain(libvirttest.BaseTestClass):
         obj = self.bus.get_object('org.libvirt', '/org/libvirt/Test')
         ver = obj.Get('org.libvirt.Connect', "LibVersion", dbus_interface=dbus.PROPERTIES_IFACE)
         if ver == 6006000:
-            return
+            pytest.skip("CPU toploogy is broken in libvirt 6.6.0 test driver")
 
         obj, domain = self.get_test_domain()
         pinInfo_expected = [
